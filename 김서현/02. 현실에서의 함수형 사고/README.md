# 02. 현실에서의 함수형 사고

- [액션, 계산, 데이터 - 변경 가능성에 따라 코드를 나누는 계층형 설계](#액션-계산-데이터---변경-가능성에-따라-코드를-나누는-계층형-설계)
- [일급 추상 - 타임라인 다이어그램, 타임라인 커팅](#일급-추상---타임라인-다이어그램-타임라인-커팅)

## 액션, 계산, 데이터 - 변경 가능성에 따라 코드를 나누는 계층형 설계

- `계층형 설계` stratified design

  - 비즈니스 규칙, 도메인 규칙, 기술 스택 계층으로으로 구분.

    - ← (가변성) (불변성) →
    - 각 계층은 아래에 있는 계층을 기반으로 만들어짐.
    - 제일 위에 있는 코드는 의존성이 거의 없어 쉽게 바꿀 수 있음.

    |          | 메인 레이어       | 피자 주방 레이어 | 창고 레이어        |
    | -------- | ----------------- | ---------------- | ------------------ |
    | 가변성 ↑ | **비즈니스 규칙** | 이번 주 메뉴     | 이번 주 사야 할 것 |
    |          | **도메인 규칙**   | 피자 만들기      | 재료 목록          |
    | 불변성 ↑ | **기술 스택**     | 자바스크립트     | 자바스크립트       |

## 일급 추상 - 타임라인 다이어그램, 타임라인 커팅

- `타임라인 다이어그램`
  - : 시간에 따라 변하는 액션을 시각화하는 방법
  - 사용 시 장점
    - 액션이 다른 액션과 어떻게 연결되는지 볼 수 있음
    - 시간에 따라 진행하는 작업을 쉽게 이해 가능
    - 시스템의 문제를 쉽게 파악 가능
    - 동시에 실행되는 분산 시스템 시각화 용이
  - 분산 시스템 구성 시 주의해야 할 점
    - 타임라인끼리는 기본적으로 서로 순서를 맞추지 않음.
    - 액션이 실행되는 시간은 중요하지 않음 → 각각의 타임라인은 다른 타임라인의 순서와 관계 없이 만들어야. (소스 만드는 게 가장 오래 걸리지만 항상 그렇진 않음)
    - 드물지만 타이밍이 어긋나는 경우는 실제로 일어남 → 타임라인은 항상 올바른 결과를 보장해야.
- `타임라인 커팅`
  - 여러 타임라인이 동시에 진행될 때 서로 순서를 맞춤
  - 액션이 올바른 순서로 실행될 수 있도록 보장해줌
  - 고차 동작(high-order operation)으로 구현함.
  - 각 타임라인은 독립적으로 동작. 작업이 완료되면 다른 타임라인이 끝나기를 기다림.
