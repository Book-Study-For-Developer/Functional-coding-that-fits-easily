# 1장 쏙쏙 들어오는 함수형 코딩에 오신 것을 환영합니다.

## 함수형 프로그래밍이란?

함수형 프로그래밍은 범용 프로그래밍 패러다임이기 때문에 어디서든 잘 쓸수 있다

### 함수형 프로그래밍의 정의

1. `수학 함수`를 사용하고 `부수 효과`를 피하는 것이 특징인 프로그래밍 패러다임

2. `부수 효과`없이 `순수 함수`만 사용하는 프로그래밍 스타일

> **부수 효과란,**
  >> 함수가 리턴값 이외에 하는 모든일을 말함
>  >
  >> 부수효과가 있는 함수에서 리턴값이 필요해서 호출하면 의도치 않은 부수효과가 발생할 수 있음
>  >
  >> ex) 메일 보내기나, 전역 상태 수정하기

> **순수 함수란,**
  >>인자에만 의존하고 부수 효과가 없는 함수
>  >
  >>같은 인자를 넣으면 항상 같은 값을 리턴
>  >
  >>ex) sum(2,3) -> 5를 리턴

하지만 실제 함수형 프로그래머는 부수 효과와 순수하지 않은 함수를 사용

## 실용적인 측면에서 함수형 프로그래밍 정의의 문제점

위에서 정의한 함수형 프로그래밍의 정의에는 문제가 있음

1. 부수 효과는 필요하다

    이메일을 전송하는 시스템에 전송을 안할 수 없음

2. 함수형 프로그래밍은 부수 효과를 잘 다룰 수 있다

    순수하지 않은 함수를 잘 다룰 수 있는 기술이 많이 있다

    (새로운 배열을 생성해서 기존 배열이 안바뀌게 한다거나 그런 기술을 말하는거 같음)

3. 함수형 프로그래밍은 실용적이다

    정의에서는 함수형 프로그래밍이 수학적이라 실제 소프트웨어 개발에서 사용하지 않는 것처럼 느껴지지만 실제로는 함수형으로 만들어진 좋은 소프트웨어가 많이 있음

## 함수형 프로그래밍을 학문적 지식이 아닌 기술과 개념으로 보기

함수형 프로그래밍의 중요한 개념은 객체 지향 프로그래밍이나 절차적 프로그래밍을 가리지 않고 모든 프로그래밍 언어에서 쓸 수 있다

함수형 프로그래머들이 중요하다고 말하는 기술인 액션과 계산, 데이터를 알알야 한다

## 액션과 계산, 데이터 구분하기

함수형 프로그래머는 코드를 세분류로 나눔

1. 액션

    부수효과를 일으킨다고 볼 수 있음

    액션은 언제, 얼만큼 호출하는지가 중요

2. 계산

    동일한 입력값에는 동일한 출력값을 제공하는 순수 함수

3. 데이터

    말그대로 데이터

```ts
{ firstName : "Eric", lastName: "Normand" } // 사람에 대한 정보

sendEmail(to, from, subject, body) // 이메일 보내는 코드

sum(numbers) // 숫자를 더하는 함수

saveUserDB(user) // 데이터 베이스에 저장

string_length(str) // 같은 문자열을 넣으면 항상 같은 길이 반환

getCurrentTime() // 부를 때마다 다른 시간 반환

[1, 10, 2, 45, 3, 98] // 숫자 리스트
```

위의 코드를 세 분류로 나눠야 함

## 함수형 프로그래머는 부를 때 조심해야 하는 코드를 구분합니다

```ts
{
  firstName : "Eric",
  lastName: "Normand"
}

sendEmail(to, from, subject, body)

sum(numbers)

saveUserDB(user)

string_length(str)

getCurrentTime()

[1, 10, 2, 45, 3, 98]
```

위와 같은 코드가 있을 때 호출하는 횟수나 호출하는 시점이 중요한 함수를 분류하는 것은 매우 중요

액션과 나머지를 분류 해야 됨

**액션**

```ts
sendEmail(to, from, subject, body);

saveUserDB(user);

getCurrentTime();
```

**나머지**

```ts
sum(numbers)

string_length(str)

[1, 10, 2, 45, 3, 98]

{
  firstName : "Eric",
  lastName: "Normand"
}
```

`액션`은 *호출하는 시점과 횟수에 의존하기 때문에 호출할 때 조심*해야 함

`나머지` 코드는 언제 호출해도 항상 같은 값을 주기 때문에 _호출하는 시점이 중요하지 않음_

또, 외부에 영향을 주지 않기 때문에 _호출하는 횟수 역시 중요하지 않음_

## 함수형 프로그래머는 실행하는 코드와 그렇지 않은 코드를 구분합니다

나머지 코드에서 계산과 데이터를 나누어야 함

계산이나 데이터는 둘 다 부르는 시점이나 횟수가 중요하지 않기 때문에 `실행 여부`에 따라 나눠야 한다

계산은 실행이 가능하지만 데이터는 그렇지 않음

`데이터`는 *정적이고 보이는 그대로*이며, `계산`은 _실행하기 전까지 어떻게 동작할 지 알수 없음_

**나머지**

```ts
sum(numbers)

string_length(str)

[1, 10, 2, 45, 3, 98]

{
  firstName : "Eric",
  lastName: "Normand"
}
```

위의 코드를 실행 여부에 따라 나누면

**계산**

```ts
sum(numbers);

string_length(str);
```

**데이터**

```ts
[1, 10, 2, 45, 3, 98]

{
  firstName : "Eric",
  lastName: "Normand"
}
```

이렇게 나누어짐

액션과 계산, 데이터를 구분하는 것은 함수형 프로그래밍의 기본 개념이기 때문에 3가지로 분류하는것부터 시작 하면 됨

## 함수형 프로그래머는 액션과 계산, 데이터를 구분합니다

시나리오로 구분 해보기

프로젝트 관리 클라우드 서비스(여러 클라이언트가 직업 완료 표시를 하면 이메일을 통해 알려주는 서비스)

1. 사용자가 작업 완료 표시를 함

    실행 횟수에 의존하기 때문에 `액션`

2. 클라이언트가 서버로 메세지를 보냄

    메세지를 보내는것은 `액션`, 메세지는 `데이터`

3. 서버가 메세지를 받음

    메세지를 받는 것은 횟수에 의존하므로 `액션`

4. 서버가 데이터 베이스를 변경

    내부 상태를 바꾸는 것은 `액션`

5. 서버가 누구에게 알림을 보낼지 결정

    결정하는 것은 `계산`, 입력값이 같다면 항상 같은 결정을 내리기 때문

6. 서버가 이메일로 알림을 보냄

    이메일 보내기는 `액션`, 실행 횟수에 의존



## 함수형 프로그래밍에서는 코드를 세가지로 분류합니다

1. 액션

    실행 시점이나 횟수 또는 둘 다에 의존

2. 계산

    같은 입력값을 가지고 계산 하면 항상 같은 결괏값이 나옴

    몇번을 불러도 안전

3. 데이터

    이벤트에 대해 기록한 사실

## 액션, 계산 데이터를 구분하면 어떤 장점이 있나요?

함수형 프로그래밍은 요즘 유행하는 분산 시스템에 잘 어울린다.

여기서 분산 시스템이란, 
하나의 기기에서 작동하는 시스템이 아닌 통신을 해서 작동하는 시스템
우리가 개발하는 웹페이지도 서버와 통신하며 작동하는 분산 시스템

**액션, 계산, 데이터를 구분하면 생기는 장점**

실행시점이나 횟수에 의존하는 코드를 없애면, 코드를 더 쉽게 이해할 수 있고 심각한 버그를 해결할 수 있다.
(액션을 제외하고 나머지 코드를 볼때 더 직관적으로 어떤 일을 하는지 파악할 수 있을 것 같음)

## 함수형 사고가 무엇인가요?

함수형 프로그래머가 소프트웨어 문제를 해결하기 위해 사용하는 기술과 생각

주요 개념은 2가지가 있음

1. 액션과 계산, 데이터를 구분해서 생각하는것

    코드를 더 이해하기 쉽게 만들 수 있도록 액션과 계산, 데이터를 구분해야 된다고 생각하는 사고

2. 일급 추상이라는 개념

    일급 객체의 특성을 이용한 추상적인 구조를 생각하는 사고
    (함수에 함수를 넘긴다거나, 함수를 리턴한다거나)

---

## 되돌아보기

### Todo리스트 기능 액션 데이터 계산으로 생각해보기(?)

**1단계**
1. Todo리스트에 할일을 추가한다 (`액션`)
2. Todo리스트 할일을 삭제한다 (`액션`)
2. 완료시, Todo리스트에 완료 표시를 한다 (`액션`)
3. "전체", "완료", "미완료" 필터를 적용한다 (`액션`)

**2단계**
1. 1. Todo리스트에 추가할 메세지 (`데이터`)
   2. Todo리스트 업데이트 (`액션`)

2. 1. Todo리스트 삭제 (`액션`)

3. 1. 기존 Todo리스트 (`데이터`)
   2. 완료 표시할 Todo리스트 Id와 기존 Todo리스트로 완료 표시된 새로운 리스트 반환(`계산`?)
   
4. 1. 현재 Todo리스트 (`데이터`)
   2. "완료"인 아이템 필터링 (`계산`)
   3. 필터링된 Todo리스트 (`데이터`)
